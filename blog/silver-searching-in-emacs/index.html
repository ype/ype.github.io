<!DOCTYPE html>
<html>
<head>
	<link href="http://gmpg.org/xfn/11" rel="profile">
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<link rel="canonical" href="http://ype.env.sh/blog/silver-searching-in-emacs" />
	<meta name="description" content="Get Stuff Done, FAST!" />
	<meta property="og:description" content="Get Stuff Done, FAST!" />
	<meta itemprop="image" content="http://ype.env.sh/media/2014-04-08-silver-searching-in-emacs/silverSearcher.gif" />
	<meta property="og:image" content="http://ype.env.sh/media/2014-04-08-silver-searching-in-emacs/silverSearcher.gif" />
	<meta property="og:title" content="Silver Searching in Emacs" />
	<meta property="og:type" content="article" />
	<meta property="og:url" content="http://ype.env.sh/blog/silver-searching-in-emacs" />
	<meta property="og:site_name" content="ype" />
	<title>Silver Searching in Emacs &middot; ype</title>
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="HandheldFriendly" content="True" />
	<meta name="MobileOptimized" content="320" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" type="text/css" href="/assets/css/animate.css" />
        <link rel="stylesheet" type="text/css" href="/assets/fonts/fira/fira.css" />
        <link rel="stylesheet" type="text/css" href="/assets/fonts/Sabon/font.css" />
        <link rel="stylesheet" type="text/css" href="/assets/fonts/SabonNext/font.css" />
        <link href="/assets/css/syntax.css" type="text/css" rel="stylesheet" />
	<link rel="stylesheet" type="text/css" media="only screen and (min-width: 1001px)" href="/assets/css/desktop.css" />
	<link rel="stylesheet" type="text/css" media="only screen and (max-width: 1000px)" href="/assets/css/mobile.css" />
	<link rel="stylesheet" type="text/css" href="/assets/css/genericons.css" />
	<link rel="apple-touch-icon" href="http://ype.env.sh/assets/images/icon.png">
	<link rel="shortcut icon" href="http://ype.env.sh/assets/images/favicon.ico">
	<link rel="alternate" type="application/rss+xml" title="RSS" href="http://ype.env.sh/atom.xml">
</head>

<body>
	<header class="clean" style="background-image: url(/media/2014-04-08-silver-searching-in-emacs/silverSearcher.gif);height: 100%;">
  
  <label class="menu" for="_1">
  <span class="genericon genericon-menu"></span>
</label>
<input id="_1" type="checkbox">
<div class="menu-content">
  <div class="menu" style="background-color: #777; z-index: -1;"></div>
  
  <a href="/">Home</a><br>
  
  <a href="/about">About</a><br>
  
  <a href="/archive">Archive</a><br>
  
  <a href="/embedded">Embedded</a><br>
  
</div>
<div class="social-links">
  
  <a href="https://github.com/ype" target="_blank" title="Fork me">
    <span class="genericon genericon-github"></span>
  </a>
  
  <a href="https://www.linkedin.com/in/01100001" target="_blank" title="linkedin">
    <span class="genericon genericon-linkedin"></span>
  </a>
  
  <a href="http://ype.env.sh/atom.xml" target="_blank" title="Feed">
    <span class="genericon genericon-feed"></span>
  </a>
  
</div>

  <div id="post-info">
    <h1>Silver Searching in Emacs</h1>
    
    <h2>Get Stuff Done, FAST!</h2>
    
    08 April 2014
  </div>
  <div id="nav-icon" style="bottom: 60px;">
    <a class="scroll" data-speed="1000" href="#article"><span class="genericon genericon-expand"></span></a>
  </div>
</header>
<div id="article">
  <div class="post">
    <p><span class="dropcap">I</span> always seem to run into the constant
problem of having to change multiple variables, symbols, function
names, and other usually mundane parts of my code on a regular
basis. Most likely due to the fact that I first name everything in a
random, train of thought manner, only realising later that a more
useful, explanatory definition is required.</p>

<p>Up until last night I found myself opening and closing multiple files
after spending a few minutes in each finding and replacing keywords,
and then ultimately running my code to find out I missed a few in this
file, and a few in that file.</p>

<p>Take for example two files - one named foobar, and the other named
foofoo. In both foobar and foofoo I have a something with the keywords
foofunct. Now this something (variable, function, whatever) needs to
have the same name in both these files. So I decided while editing
the first file foobar that I want to change foofunct to foodef. With
the change made to foobar lock in place and saved, I attempt to run my
code, ultimately to be greeted by the wonderful world of errors saying
something of the sort &ldquo;your doing it wrong, I can&rsquo;t find your flipping
foofunct in foofoo anymore because it&rsquo;s not in foobar&rdquo;</p>

<p>Now this is an ongoing problem I&rsquo;ve had and have always thought there
has to be a better way&#x2026;</p>

<h1>Well maybe I&#39;m just ignorant</h1>

<p>Enter &ldquo;The Silver Searcher&rdquo; or &ldquo;ag&rdquo; for sort. Ag is a wonderful
command line tool that lets you quickly search a code file, or set of
files, to find a specific keyword within those file. Ag from the
command line is awesome, but Ag in Emacs is amazing. By adding a few
simple lines to my dotemacs file I am not able to find, replace, and
view a single keyword across multiple files within a matter of
seconds.</p>

<h1>Adding some silver to your search (the code bit)</h1>

<p>First you are going to have to make sure you have ag installed.</p>

<p>On Mac you can do this through homebrew very easily (if you don&rsquo;t have
homebrew installed already, join the future and install it)</p>

<ol>
<li><p>Homebrew</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ brew install the_silver_searcher
</code></pre></div></li>
<li><p>Macports</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ port install the_silver_searcher
</code></pre></div></li>
<li><p>Linux (Debian/Ubuntu)</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ apt-get install silversearcher-ag
</code></pre></div></li>
</ol>

<p><em>note: substitute <code>apt-get</code> for whichever package manager you use regularly</em></p>

<h2>In your dotemacs</h2>

<p>In your dotemacs you need a few things. (before you do anything use
<code>M-x package-install</code> to get the required packages <code>ag</code> and <code>wgrep</code>
(optional (projectile)) ;;it makes things a whole lot nicer</p>
<div class="highlight"><pre><code class="language-lisp" data-lang="lisp"><span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">executable-find</span> <span class="s">&quot;ag&quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;ag</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;wgrep-ag</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">setq-default</span> <span class="nv">ag-highlight-search</span> <span class="no">t</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;H-q&quot;</span><span class="p">)</span> <span class="ss">&#39;ag-project</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;H-z&quot;</span><span class="p">)</span> <span class="ss">&#39;projectile-ag</span><span class="p">))</span> <span class="c1">; if you have projectile</span>
</code></pre></div>
<p>As you might noticed I am using Hyper-q <code>H-q</code> and Hyper-z <code>H-z</code> as
hot keys for ag-*(whatever), you can change these to suit your
preferred keybinding style.</p>

<p>A few other useful keybindings you may want to check out are <code>C-x
C-p</code>, this makes the search buffer writable and lets you edit results
inline. Also, <code>C-c C-f</code>, which activates
<code>next-error-follow-minor-mode</code>, a nifty feature that quickly opens the
file matching the search result your cursor is currently over.</p>

<p>The gif show at the top of this page is a demo of how I use it to
navigate my emacs.d nightmare...here it is again so you don&#39;t have to
scroll up to see it.</p>

<div><img src="/media/2014-04-08-silver-searching-in-emacs/silverSearcher.gif" alt="Silver Searching in Emacs" width="100%" />
<blockquote style="border-left: 10px solid #D5D5D5;">Silver Searching in Emacs</blockquote></div>

<h1>In (somewhat of a haphazard) Conclusion</h1>

<p>With the setup complete you can now move you cursor over any variable,
function name, definition, word, whatever and run ag on it to find all
the uses of it in either a project, file, or if you&rsquo;re feel
ambitious your entire system (be warned, this sucks the life out of
everything and may take a billion years to complete)</p>

    
    <hr />
<div id="disqus_thread"></div>
<script type="text/javascript">
 /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
 var disqus_shortname = 'ypenv'; // required: replace example with your forum shortname

 /* * * DON'T EDIT BELOW THIS LINE * * */
 (function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
 })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    
  </div>
</div>

<footer class="clean" style="background-image: url(/media/2013-11-08-problematic-procrastination/cover.jpg);height: 75%; min-height: 500px;">
  <div id="nav-icon" style="top: 25px;">
    <a class="scroll" data-speed="1000" href="#article"><span class="genericon genericon-collapse"></span></a>
  </div>
  <div id="post-info">
    <h3>Featured post</h3>
    <a href="/blog/problematic-procrastination">
      <h1>Problematic Procrastination</h1>
      
      <h2>when all you need to get done, doesn't.</h2>
      
    </a>
  </div>
  <p class="copyright">&copy;2014, <a href="http://ype.env.sh" target="_blank">anton</a>. <a href="http://www.wtfpl.net/" target="_blank">Some rights might be reserved, who really cares?</a>.</p>
</footer>

<script src="/assets/js/smooth-scroll.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-53880831-2', 'auto');
 ga('require', 'displayfeatures');
 ga('require', 'linkid', 'linkid.js');
 ga('send', 'pageview');

</script>


</body>
</html>